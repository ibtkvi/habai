
<span ng-repeat="ancestor in ancestors track by ancestor.id">
  <a ng-click="select(null)" ng-show="ancestor.root" href="">BUBEN</a>
  <a ng-click="select(ancestor.device.id)" ng-hide="ancestor.root" href="">{{ancestor.device.name}}</a>
  <span class="glyphicon glyphicon-chevron-right" ng-hide="$last"></span>
</span>

<div class="btn-group" ng-show="children.length">
  <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown">
    <span class="glyphicon glyphicon-chevron-right"></span> <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li ng-repeat="child in children"><a href="" ng-click="select(child.device.id)">{{child.device.name}}</a></li>
  </ul>
</div>